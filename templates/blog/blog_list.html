{% extends 'base/base.html' %}
{% load static %}
{% load course_tags %}
{% block content %}
<div class="container mb-11">
    <div class="row">
        <div class="col-md-7 col-lg-8 mb-5 mb-md-0">
            <div class="row row-cols-md-2">
                {% for post in posts %}
                <div class="col-md mb-6">
                    <!-- Card -->
                    <div class="card border shadow p-2 lift sk-fade">
                        <!-- Image -->
                        <div class="card-zoom position-relative">
                            <a href="{% url 'blog-detail' post.slug %}" class="card-img d-block sk-thumbnail img-ratio-3"><img class="rounded shadow-light-lg img-fluid" src="{{post.img.url}}" alt="..."></a>
    
                            <a href="{% url 'blog-detail' post.slug %}" class="badge sk-fade-bottom badge-lg badge-purple badge-pill badge-float bottom-0 left-0 mb-4 ms-4 px-5 me-4">
                                <span class="text-white fw-normal font-size-sm">{{post.category}}</span>
                            </a>
                        </div>
    
                        <!-- Footer -->
                        <div class="card-footer px-2 pb-0 pt-4">
                            <ul class="nav mx-n3 mb-3">
                                <li class="nav-item px-3">
                                    <a href="{% url 'blog-detail' post.slug %}" class="d-flex align-items-center text-gray-800">
                                        <div class="me-3 d-flex">
                                            <!-- Icon -->
                                            <svg width="15" height="15" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M13.8102 9.52183C13.313 9.08501 12.7102 8.70758 12.0181 8.40008C11.7223 8.2687 11.3761 8.40191 11.2447 8.69762C11.1134 8.99334 11.2466 9.33952 11.5423 9.47102C12.1258 9.73034 12.6287 10.0436 13.0367 10.4021C13.5396 10.8441 13.8281 11.484 13.8281 12.1582V13.2422C13.8281 13.5653 13.5653 13.8281 13.2422 13.8281H1.75781C1.43475 13.8281 1.17188 13.5653 1.17188 13.2422V12.1582C1.17188 11.484 1.46038 10.8441 1.96335 10.4021C2.55535 9.88186 4.2802 8.67188 7.5 8.67188C9.89079 8.67188 11.8359 6.72672 11.8359 4.33594C11.8359 1.94515 9.89079 0 7.5 0C5.10921 0 3.16406 1.94515 3.16406 4.33594C3.16406 5.7336 3.82896 6.97872 4.85893 7.77214C2.97432 8.18642 1.80199 8.98384 1.18984 9.52183C0.433731 10.1862 0 11.147 0 12.1582V13.2422C0 14.2115 0.788498 15 1.75781 15H13.2422C14.2115 15 15 14.2115 15 13.2422V12.1582C15 11.147 14.5663 10.1862 13.8102 9.52183ZM4.33594 4.33594C4.33594 2.59129 5.75535 1.17188 7.5 1.17188C9.24465 1.17188 10.6641 2.59129 10.6641 4.33594C10.6641 6.08059 9.24465 7.5 7.5 7.5C5.75535 7.5 4.33594 6.08059 4.33594 4.33594Z" fill="currentColor"></path>
                                            </svg>
    
                                        </div>
                                        <div class="font-size-sm">{{post.author.first_name}} {{post.author.last_name}}</div>
                                    </a>
                                </li>
                                <li class="nav-item px-3">
                                    <a href="{% url 'blog-detail' post.slug %}" class="d-flex align-items-center text-gray-800">
                                        <div class="me-2 d-flex">
                                            <!-- Icon -->
                                            <svg width="15" height="15" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M13.0664 1.17188H11.7188V0.46875C11.7188 0.209883 11.5089 0 11.25 0C10.9911 0 10.7812 0.209883 10.7812 0.46875V1.17188H4.21875V0.46875C4.21875 0.209883 4.0089 0 3.75 0C3.4911 0 3.28125 0.209883 3.28125 0.46875V1.17188H1.93359C0.867393 1.17188 0 2.03927 0 3.10547V13.0664C0 14.1326 0.867393 15 1.93359 15H13.0664C14.1326 15 15 14.1326 15 13.0664V3.10547C15 2.03927 14.1326 1.17188 13.0664 1.17188ZM1.93359 2.10938H3.28125V2.57812C3.28125 2.83699 3.4911 3.04688 3.75 3.04688C4.0089 3.04688 4.21875 2.83699 4.21875 2.57812V2.10938H10.7812V2.57812C10.7812 2.83699 10.9911 3.04688 11.25 3.04688C11.5089 3.04688 11.7188 2.83699 11.7188 2.57812V2.10938H13.0664C13.6157 2.10938 14.0625 2.55621 14.0625 3.10547V4.21875H0.9375V3.10547C0.9375 2.55621 1.38434 2.10938 1.93359 2.10938ZM13.0664 14.0625H1.93359C1.38434 14.0625 0.9375 13.6157 0.9375 13.0664V5.15625H14.0625V13.0664C14.0625 13.6157 13.6157 14.0625 13.0664 14.0625Z" fill="currentColor"></path>
                                            </svg>
    
                                        </div>
                                        <div class="font-size-sm">{{post.post_date | date:'d F Y'}}</div>
                                    </a>
                                </li>
                            </ul>
    
                            <!-- Heading -->
                            <a href="{% url 'blog-detail' post.slug %}" class="d-block"><h5 class="line-clamp-2 h-48 h-lg-52">{{post.title}}</h5></a>
                        </div>
                    </div>
                </div>
                {% endfor %}
                
            </div>
            <nav class="mt-8" aria-label="Page navigationa">
                <ul class="pagination justify-content-center">
                    {% if is_paginated %}
              {% if page_obj.has_previous %}
                <li class="page-item"><a class="page-link" style="color:black" href="?page=1"><i class="fa fa-arrow-left" aria-hidden="true"></i></a></li>
                <li class="page-item"><a class="page-link" style="color:black" href="?page={{ page_obj.previous_page_number }}"><i class="fa fa-angle-left" aria-hidden="true"></i></a></li>
              {% endif %}
              {% for num in page_obj.paginator.page_range %}
                {% if num == page_obj.number %}
                  <li class="page-item active"><a class="page-link" style="color:#ffffff; background-color: black; border-color: black;" href="?page={{num}}">{{num}}</a></li>
                {% elif num > page_obj.number|add:'-2' and num < page_obj.number|add:'2' %}
                  <li class="page-item"><a class="page-link" style="color:black" href="?page={{num}}">{{num}}</a></li>
                {% endif %}
              {% endfor %}
              {% if page_obj.has_next %}
                <li class="page-item"><a class="page-link" style="color:black" href="?page={{page_obj.next_page_number}}"><i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
                <li class="page-item"><a class="page-link" style="color:black" href="?page={{ page_obj.paginator.num_pages }}"><i class="fa fa-arrow-right" aria-hidden="true"></i></a></li>
              {% endif %}
            {% endif %}
                </ul>
            </nav>
        </div>

        <div class="col-md-5 col-lg-4">
            <!-- BLOG SIDEBAR
            ================================================== -->
            <div class="">
                {% include 'blog/search_component.html' %}

                <div class="border rounded mb-6 p-5 py-md-6 ps-md-6 pe-md-4">
                    <h4 class="mb-5">Category</h4>
                    <div class="nav flex-column nav-vertical">
                        {% for categories in cat_list %}
                            <a href="{% url 'category' categories %}" class="nav-link py-2">{{categories}}  <span class="badge bg-dark">{{categories.category_set.count}}</span></a>
                        {% endfor %}
                    </div>
                </div>

                <div class="border rounded mb-6 p-5 py-md-6 ps-md-6 pe-md-4">
                    <h4 class="mb-5">Recent Posts</h4>
                    <ul class="list-unstyled mb-0">
                        {% for post in latestpost_list %}
                        <li class="media mb-6 d-flex">
                            <a href="{% url 'blog-detail' post.slug %}" class="mw-70p d-block me-5">
                                <img src="{{post.img.url}}" alt="..." class="avatar-img rounded-lg h-70p o-f-c">
                            </a>
                            <div class="media-body flex-shrink-1">
                                <a href="{% url 'blog-detail' post.slug %}" class="d-block">
                                    <h6 class="line-clamp-2 mb-1 fw-normal">{{post.title}}</h6>
                                </a>
                                <span>{{post.post_date | date:'d F Y'}}</span>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}